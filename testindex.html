<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>
<script src="https://cdn.jsdelivr.net/npm/phaser@3.51.0/dist/phaser-arcade-physics.min.js"></script> 

<body>
  <script>
  
  var config = {
    type: Phaser.AUTO,
    width: 800,
    height: 600,
    scene: {
        preload: preload,
        create: create,
        update: update
    }
};

var game = new Phaser.Game(config);
var movingObject;
var objectsGroup;

function preload() {
    this.load.image('object', '/assets/fox.png');
}

function create() {
    //objectsGroup = this.physics.add.group();

    var fox = this.physics.add.image(0, 0, 'fox');
  fox.setOrigin(-4, -3.3); 
  fox.setScale(0.3); 


    // 움직이는 물체 생성
    movingObject = this.physics.add.sprite(400, 500, 'object');
    movingObject.setVelocity(100, 0); // 초기 속도 설정
    movingObject.setInteractive(); // 클릭 가능하게 설정

    // 움직이는 물체에 클릭 이벤트 리스너 추가
    movingObject.on('pointerdown', function(pointer) {
        // 클릭한 위치로 움직이기
        movingObject.x = pointer.x;
        movingObject.y = pointer.y;

        // 새로운 물체 생성
        var newObject = objectsGroup.create(pointer.x, pointer.y, 'object');
        newObject.setVelocity(100, 0); // 새로운 물체도 움직이기
        newObject.setInteractive(); // 클릭 가능하게 설정

        // 새로운 물체에 클릭 이벤트 리스너 추가
        newObject.on('pointerdown', function(pointer) {
            // 클릭한 위치로 움직이기
            newObject.x = pointer.x;
            newObject.y = pointer.y;
        });
    });
}

function update() {
    // 여기에서 움직이는 물체와 추가로 생성된 물체의 업데이트 로직을 구현할 수 있습니다.
}

  </script>
</body>
</html>